"use strict";angular.module("angularPoint").directive("apInputGroup",["_","apCacheService","$filter",function(a,b,c){return{scope:{choices:"=?",cols:"=?",description:"=?",disabled:"=?",displayDescription:"=?",entity:"=?",fieldDefinition:"=?",fieldName:"=?",groupClass:"=?",inputClass:"=?",inputGroup:"=?",label:"=?",lookupField:"=?",max:"=?",maxlength:"=?",min:"=?",minlength:"=?",placeholder:"=?",required:"=?",rows:"=?",validation:"=?",validationMessage:"=?",viewport:"=?"},restrict:"A",transclude:!0,templateUrl:"src/apInputContainer.html",link:function(d){function e(){return p.inputGroup?"src/apInputGroup.html":p.contentUrl}function f(){var b=p.groupClass||g();p.inputGroupClass=a.isFunction(b)?b():b}function g(){var a=p.cols||n;return"col-"+p.viewport+"-"+a}function h(c){if(!p.lookupOptions){var d=p.List;d&&(p.lookupOptions=b.getCachedEntities(d),a.isFunction(p.lookupFilter)&&(p.lookupOptions=p.lookupFilter(c,lookupOptions)))}p.lookupArray=a.isArray(p.lookupOptions)?p.lookupOptions:a.toArray(p.lookupOptions)}function i(a,b){if(!a||!b)throw new Error("An entity and fieldName are both required on the directive ifa fieldDefinition isn't specified.");return a.getFieldDefinition(b)}function j(b){if(p.validation&&a.isFunction(p.validation)){var c=b||"";return p.validation(c,p)}return!0}function k(b){return b?a.isDate(b):!0}var l=d.fieldDefinition||i(d.entity,d.fieldName);if(!a.isObject(l))throw new Error("apInputGroup requires a valid field definition object",d);var m=[f],n=3,o={choices:l.Choices,columns:n,contentUrl:"",description:l.Description,displayDescription:!1,disabled:!1,inputClass:"",inputGroup:!0,inputGroupClass:"col-sm-3",label:l.DisplayName,lookupField:l.ShowField?c("inflector")(l.ShowField,"variable"):"title",max:l.Max,maxlength:void 0,min:l.Min,minlength:void 0,placeholder:null,required:l.Required||!1,rows:l.NumLines||6,validationMessage:"",viewport:"sm"};switch(l.objectType){case"Boolean":o.contentUrl="src/apInputControl.Boolean.html";break;case"Choice":o.contentUrl="src/apInputControl.Choice.html";break;case"DateTime":o.contentUrl="src/apInputControl.Date.html",o.validation=o.validation||k,o.validationMessage="Please enter a valid date.";break;case"HTML":o.contentUrl="src/apInputControl.HTML.html",n=12;break;case"Currency":case"Float":case"Integer":case"Number":o.contentUrl="src/apInputControl.Number.html",o.validationMessage="Not a valid number!";break;case"Lookup":m.push(function(){h(p.entity)}),o.contentUrl="src/apInputControl.Lookup.html";break;case"LookupMulti":m.push(function(){p.entity[p.fieldName]=p.entity[p.fieldName]||[],h(p.entity)}),o.contentUrl="src/apInputControl.LookupMulti.html";break;case"MultiChoice":o.contentUrl="src/apInputControl.MultiChoice.html";break;case"Note":n=12,o.contentUrl="src/apInputControl.Note.html";break;default:o.contentUrl="src/apInputControl.Text.html"}var p=a.extend({},o,l,d);if(d.$watch("fieldDefinition",function(b,c){b&&b!==c&&a.extend(p,b)},!0),!a.isString(p.fieldName))throw new Error("Field name is either undefined or not a string.  Ensure you place apostrophe's inside the quotes when identifying data-field-name.");d.options=p,d.validate=j,d.getPrimaryTemplate=e,a.isFunction(p.groupClass)&&d.$watch("entity."+p.fieldName,function(){f()}),!p.entity[p.fieldName]&&p.Default&&(p.entity[p.fieldName]=p.Default),a.each(m,function(a){a()})}}}]),angular.module("angularPoint").directive("apInputRow",["_",function(a){return{scope:{entity:"=",fields:"=",containerClass:"=",ngDisabled:"="},restrict:"A",transclude:!0,templateUrl:"src/apInputRow.html",link:function(b){b.fieldNameArray=a.isArray(b.fields)?b.fields:[b.fields],b.state={containerClass:b.containerClass||"row"}}}}]),angular.module("angularPoint").run(["$templateCache",function(a){a.put("src/apInputContainer.html","<div ng-include=getPrimaryTemplate()></div>"),a.put("src/apInputControl.Boolean.html",'<button class="btn btn-link {{ options.inputClass }}" ng-click="options.entity[options.fieldName] = !options.entity[options.fieldName]" ng-disabled=options.disabled><i class="fa fa-2x {{ options.entity[options.fieldName] ? \'fa-check-square-o\' : \'fa-square-o\' }}"></i></button>  <input type=checkbox class=hidden ng-model=options.entity[options.fieldName] ui-validate="\'validate($value)\'">'),a.put("src/apInputControl.Choice.html",'<select class="form-control {{ options.inputClass }}" ng-required=options.required ui-validate="\'validate($value)\'" placeholder="{{ options.placeholder }}" ng-disabled=options.disabled ng-model=options.entity[options.fieldName] ui-validate="\'validate($value)\'" ng-options="choice for choice in options.choices"></select>'),a.put("src/apInputControl.Date.html",'<input ui-date class="form-control {{ options.inputClass }}" ui-validate="\'validate($value)\'" ng-required=options.required ng-disabled=options.disabled placeholder="{{ options.placeholder }}" ng-model=options.entity[options.fieldName]>'),a.put("src/apInputControl.HTML.html",'<div text-angular class="{{ options.inputClass }}" ng-required=options.required ui-validate="\'validate($value)\'" name="{{ options.fieldName }}" ta-disabled=options.disabled placeholder={{options.placeholder}} ng-model=options.entity[options.fieldName]></div>'),a.put("src/apInputControl.Lookup.html",'<div ui-select ng-model=options.entity[options.fieldName] ng-required=options.required ng-disabled=options.disabled class="{{ options.inputClass }}"><div ui-select-match placeholder="{{ options.placeholder }}">{{ $select.selected[options.lookupField] }}</div><div ui-select-choices data-repeat="{\'lookupId\': lookup.id, \'lookupValue\': lookup[options.lookupField]} as\nlookup in options.lookupArray track by lookup.id ">{{ lookup[options.lookupField] }}</div></div>'),a.put("src/apInputControl.LookupMulti.html",'<div ui-select multiple ng-model=options.entity[options.fieldName] ui-validate="\'validate($value)\'" ng-required=options.required ng-disabled=options.disabled class="form-control {{ options.inputClass }}"><div ui-select-match placeholder="{{ options.placeholder }}">{{ $item[options.lookupField] }}</div><div ui-select-choices data-repeat="{\'lookupId\': lookup.id, \'lookupValue\': lookup[options.lookupField]} as\n    lookup in options.lookupArray track by lookup.id ">{{ lookup[options.lookupField] }}</div></div>'),a.put("src/apInputControl.MultiChoice.html",'<div ui-select multiple ng-required=options.required ui-validate="\'validate($value)\'" ng-disabled=options.disabled ng-model=options.entity[options.fieldName] class="form-control {{ options.inputClass }}"><div ui-select-match placeholder="{{ options.placeholder }}">{{ $item }}</div><div ui-select-choices data-repeat="choice in options.choices">{{ choice }}</div></div>'),a.put("src/apInputControl.Note.html",'<textarea ng-model=options.entity[options.fieldName] ui-validate="\'validate($value)\'" class="form-control {{ options.inputClass }}" rows={{options.rows}} ng-required=options.required ng-disabled=options.disabled placeholder={{options.placeholder}}>\n</textarea>'),a.put("src/apInputControl.Number.html",'<input type=number class="form-control {{ options.inputClass }}" ui-validate="\'validate($value)\'" ng-model=options.entity[options.fieldName] ng-required=options.required ng-disabled=options.disabled min={{options.min}} max={{options.max}} placeholder={{options.placeholder}}>'),a.put("src/apInputControl.Text.html",'<input class="form-control {{ options.inputClass }}" ui-validate="\'validate($value)\'" ng-model=options.entity[options.fieldName] ng-required=options.required ng-disabled=options.disabled ng-minlength="{{ options.minlength }}" ng-maxlength="{{ options.maxlength }}" placeholder={{options.placeholder}}>'),a.put("src/apInputGroup.html","<div class={{options.inputGroupClass}} ng-form=apInput><div class=form-group title={{options.description}} ng-class=\"{'has-error': apInput.$invalid}\"><label class=control-label>{{ options.label }} {{options.required ? '*' : ''}}</label><div ng-include=options.contentUrl ng-disabled=ngDisabled></div><span class=help-text ng-if=options.displayDescription>{{ options.description }}</span> <span class=text-danger ng-if=apInput.$invalid>{{ options.validationMessage }}</span></div></div>"),a.put("src/apInputRow.html",'<div class="{{ options.containerClass }}"><div ng-repeat="fieldName in fieldNameArray" ap-input-group data-entity=entity data-field-name=fieldName></div></div>')}]);