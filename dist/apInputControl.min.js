"use strict";angular.module("angularPoint").directive("apInputGroup",["_","apCacheService",function(a,b){return{scope:{cols:"=?",description:"=?",fieldDefinition:"=?",fieldName:"=",entity:"=",label:"=?",ngDisabled:"=",validation:"=?"},restrict:"A",transclude:!0,templateUrl:"src/apInputGroup.html",link:function(c){function d(d){var e={},f=c.fieldDefinition.List;f&&(e=b.getCachedEntities(f),a.isFunction(c.fieldDefinition.lookupFilter)&&(e=c.fieldDefinition.lookupFilter(d,e))),c.lookupOptions=e}function e(a,b){return a.getFieldDefinition(b)}function f(a){c.entity[c.fieldName]=g(a)}function g(a){var b=parseInt(a,10),d=c.lookupOptions[b];return{lookupId:b,lookupValue:d[c.state.lookupField]}}function h(){var b=c.entity[c.fieldName];d(c.entity),c.updateSingleSelectLookup=f,c.$watch("entity."+c.fieldName,function(){a.isObject(b)&&b.lookupId&&(c.state.placeholderValue=b.lookupId)})}function i(b){a.isArray(c.entity[c.fieldName])||(c.entity[c.fieldName]=[]),c.entity[c.fieldName].length=0,a.each(b,function(a){c.entity[c.fieldName].push(g(a))})}function j(){var b=c.entity[c.fieldName];d(c.entity),c.state.placeholderValue=[],c.updateMultipleSelectLookup=i,c.$watch("entity."+c.fieldName,function(){a.each(b,function(a){c.state.placeholderValue.push(a.lookupId.toString())})})}function k(){return!0}if(!a.isString(c.fieldName))throw new Error("Field name is either undefined or not a string.  Ensure you place apostrophe's inside the quotes when identifying data-field-name.");switch(c.fieldDefinition=c.fieldDefinition||e(c.entity,c.fieldName),c.cols=c.cols||c.fieldDefinition.cols||3,c.label=c.label||c.fieldDefinition.label||c.fieldDefinition.DisplayName,c.description=c.description||c.fieldDefinition.Description||null,c.state={lookupField:"title",placeholderValue:null},c.validation=c.fieldDefinition.validation||k,c.contentUrl="src/apInputControl.Text.html",c.fieldDefinition.objectType){case"Boolean":c.contentUrl="src/apInputControl.Boolean.html";break;case"Choice":c.contentUrl="src/apInputControl.Choice.html";break;case"DateTime":c.contentUrl="src/apInputControl.Date.html";break;case"HTML":c.contentUrl="src/apInputControl.HTML.html",c.cols=12;break;case"Integer":c.inputType="number";break;case"Lookup":h(),c.contentUrl="src/apInputControl.Lookup.html";break;case"LookupMulti":j(),c.contentUrl="src/apInputControl.LookupMulti.html";break;case"MultiChoice":c.contentUrl="src/apInputControl.MultiChoice.html",c.entity[c.fieldName]=c.entity[c.fieldName]||[];break;case"Note":c.rows=c.rows||c.fieldDefinition.rows||6,c.cols=12,c.contentUrl="src/apInputControl.Note.html"}}}}]),angular.module("angularPoint").directive("apInputRow",["_",function(a){return{ngDisabled:"=",scope:{entity:"=",fields:"="},restrict:"A",transclude:!0,templateUrl:"src/apInputRow.html",link:function(b){b.fieldNameArray=a.isArray(b.fields)?b.fields:[b.fields]}}}]),angular.module("angularPoint").run(["$templateCache",function(a){a.put("src/apInputControl.Boolean.html",'<button class="btn btn-link" ng-click="entity[fieldName] = !entity[fieldName]"><i class="fa fa-2x {{ entity[fieldName] ? \'fa-check-square-o\' : \'fa-square-o\' }}"></i></button>'),a.put("src/apInputControl.Choice.html",'<select class=form-control ng-model=entity[fieldName] ng-options="choice for choice in fieldDefinition.Choices"></select>'),a.put("src/apInputControl.Date.html","<input ui-date class=form-control ng-model=entity[fieldName]>"),a.put("src/apInputControl.HTML.html","<div ng-if=\"fieldDefinition.objectType === 'HTML'\" text-angular ng-model=entity[fieldName]></div>"),a.put("src/apInputControl.Lookup.html",'<select ng-model=state.placeholderValue ng-disabled=ngDisabled ng-change=updateSingleSelectLookup(state.placeholderValue) ng-options="lookup.id as lookup[state.lookupField] for (lookupId, lookup) in lookupOptions" class=form-control></select>'),a.put("src/apInputControl.LookupMulti.html",'<select ui-select2 multiple ng-model=state.placeholderValue ng-change=updateMultiModel() ng-disabled=ngDisabled class=form-control><option ng-repeat="lookup in lookupOptions" value="{{ lookup.id }}" ng-bind=lookup[state.lookupField]>&nbsp;</option></select>'),a.put("src/apInputControl.MultiChoice.html",'<select ui-select2 multiple ng-model=entity[fieldName] class=form-control><option value=""></option><option ng-repeat="choice in fieldDefinition.Choices" value={{choice}}>{{choice}}</option></select>'),a.put("src/apInputControl.Note.html","<textarea ng-model=entity[fieldName] style=width:100% name={{fieldName}} ng-disabled=disabled ui-validate=\"'validation($value)'\" class=form-conrol rows={{rows}}></textarea>"),a.put("src/apInputControl.Text.html","<input type=\"{{inputType || 'text'}}\" class=form-control ng-model=entity[fieldName]>"),a.put("src/apInputGroup.html","<div class=col-md-{{cols}}><div class=form-group title={{description}} ng-class=\"{'has-error': $form[fieldName].$invalid}\"><label>{{ label }}</label><div ng-include=contentUrl ng-disabled=ngDisabled></div></div></div>"),a.put("src/apInputRow.html",'<div class=row><div ng-repeat="fieldName in fieldNameArray" ap-input-group data-entity=entity data-field-name=fieldName></div></div>')}]);