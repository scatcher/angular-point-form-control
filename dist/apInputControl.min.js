"use strict";angular.module("angularPoint").directive("apInputGroup",["_","apCacheService",function(a,b){return{scope:{cols:"=?",description:"=?",entity:"=",fieldDefinition:"=?",fieldName:"=",groupClass:"=",label:"=?",ngDisabled:"=",validation:"=?"},restrict:"A",transclude:!0,templateUrl:"src/apInputGroup.html",link:function(c){function d(){var b=c.groupClass||e();o.groupClass=a.isFunction(b)?b():b}function e(){var a=c.cols||n.cols||3;return"col-md-"+a}function f(d){var e={},f=n.List;f&&(e=b.getCachedEntities(f),a.isFunction(n.lookupFilter)&&(e=n.lookupFilter(d,e))),c.lookupOptions=e}function g(a,b){return a.getFieldDefinition(b)}function h(a){c.entity[c.fieldName]=i(a)}function i(a){var b=parseInt(a,10),d=c.lookupOptions[b];return{lookupId:b,lookupValue:d[o.lookupField]}}function j(){var b=c.entity[c.fieldName];f(c.entity),c.updateSingleSelectLookup=h,c.$watch("entity."+c.fieldName,function(){a.isObject(b)&&b.lookupId&&(o.placeholderValue=b.lookupId)})}function k(b){a.isArray(c.entity[c.fieldName])||(c.entity[c.fieldName]=[]),c.entity[c.fieldName].length=0,a.each(b,function(a){c.entity[c.fieldName].push(i(a))})}function l(){var b=c.entity[c.fieldName];f(c.entity),o.placeholderValue=[],c.updateMultipleSelectLookup=k,c.$watch("entity."+c.fieldName,function(){a.each(b,function(a){o.placeholderValue.push(a.lookupId.toString())})})}function m(){return!0}if(!a.isString(c.fieldName))throw new Error("Field name is either undefined or not a string.  Ensure you place apostrophe's inside the quotes when identifying data-field-name.");var n=c.fieldDefinition||g(c.entity,c.fieldName),o={columns:3,description:c.description||n.Description||null,groupClass:"col-md-3",label:c.label||n.label||n.DisplayName,lookupField:"title",placeholderValue:null};switch(c.state=o,c.fieldDefinition=n,c.validation=n.validation||m,a.isFunction(c.groupClass)&&c.$watch("entity."+c.fieldName,function(){d(),console.log("Scope change detected.")}),c.contentUrl="src/apInputControl.Text.html",n.objectType){case"Boolean":c.contentUrl="src/apInputControl.Boolean.html";break;case"Choice":c.contentUrl="src/apInputControl.Choice.html";break;case"DateTime":c.contentUrl="src/apInputControl.Date.html";break;case"HTML":c.contentUrl="src/apInputControl.HTML.html",c.cols=12;break;case"Integer":c.inputType="number";break;case"Lookup":j(),c.contentUrl="src/apInputControl.Lookup.html";break;case"LookupMulti":l(),c.contentUrl="src/apInputControl.LookupMulti.html";break;case"MultiChoice":c.contentUrl="src/apInputControl.MultiChoice.html",c.entity[c.fieldName]=c.entity[c.fieldName]||[];break;case"Note":c.rows=c.rows||n.rows||6,c.cols=12,c.contentUrl="src/apInputControl.Note.html";break;default:c.contentUrl="src/apInputControl.Text.html"}return d()}}}]),angular.module("angularPoint").directive("apInputRow",["_",function(a){return{scope:{entity:"=",fields:"=",containerClass:"=",ngDisabled:"="},restrict:"A",transclude:!0,templateUrl:"src/apInputRow.html",link:function(b){b.fieldNameArray=a.isArray(b.fields)?b.fields:[b.fields],b.state={containerClass:b.containerClass||"row"}}}}]),angular.module("angularPoint").run(["$templateCache",function(a){a.put("src/apInputControl.Boolean.html",'<button class="btn btn-link" ng-click="entity[fieldName] = !entity[fieldName]"><i class="fa fa-2x {{ entity[fieldName] ? \'fa-check-square-o\' : \'fa-square-o\' }}"></i></button>'),a.put("src/apInputControl.Choice.html",'<select class=form-control ng-model=entity[fieldName] ng-options="choice for choice in fieldDefinition.Choices"></select>'),a.put("src/apInputControl.Date.html","<input ui-date class=form-control ng-model=entity[fieldName]>"),a.put("src/apInputControl.HTML.html","<div ng-if=\"fieldDefinition.objectType === 'HTML'\" text-angular ng-model=entity[fieldName]></div>"),a.put("src/apInputControl.Lookup.html",'<select ng-model=state.placeholderValue ng-disabled=ngDisabled ng-change=updateSingleSelectLookup(state.placeholderValue) ng-options="lookup.id as lookup[state.lookupField] for (lookupId, lookup) in lookupOptions" class=form-control></select>'),a.put("src/apInputControl.LookupMulti.html",'<select ui-select2 multiple ng-model=state.placeholderValue ng-change=updateMultiModel() ng-disabled=ngDisabled class=form-control><option ng-repeat="lookup in lookupOptions" value="{{ lookup.id }}" ng-bind=lookup[state.lookupField]>&nbsp;</option></select>'),a.put("src/apInputControl.MultiChoice.html",'<select ui-select2 multiple ng-model=entity[fieldName] class=form-control><option value=""></option><option ng-repeat="choice in fieldDefinition.Choices" value={{choice}}>{{choice}}</option></select>'),a.put("src/apInputControl.Note.html","<textarea ng-model=entity[fieldName] style=width:100% name={{fieldName}} ng-disabled=disabled ui-validate=\"'validation($value)'\" class=form-conrol rows={{rows}}></textarea>"),a.put("src/apInputControl.Text.html","<input type=\"{{inputType || 'text'}}\" class=form-control ng-model=entity[fieldName]>"),a.put("src/apInputGroup.html","<div class={{state.groupClass}}><div class=form-group title={{state.description}} ng-class=\"{'has-error': $form[fieldName].$invalid}\"><label>{{ state.label }}</label><div ng-include=contentUrl ng-disabled=ngDisabled></div></div></div>"),a.put("src/apInputRow.html",'<div class="{{ state.containerClass }}"><div ng-repeat="fieldName in fieldNameArray" ap-input-group data-entity=entity data-field-name=fieldName></div></div>')}]);