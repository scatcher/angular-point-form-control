!function(){"use strict";angular.module("angularPoint").constant("apInputConstants",{defaultNumberOfColumns:3,defaultNumberOfRows:6,defaultTextAreaColumns:12,defaultViewportSize:"sm"})}(),angular.module("angularPoint").directive("apInputGroup",["_","apCacheService","$filter","apInputConstants",function(a,b,c,d){return{scope:{choices:"=?",cols:"=?",description:"=?",disabled:"=?",displayDescription:"=?",entity:"=?",fieldDefinition:"=?",fieldName:"=?",groupClass:"=?",inputClass:"=?",inputGroup:"=?",label:"=?",lookupField:"=?",lookupOptions:"=?",max:"=?",maxlength:"=?",min:"=?",minlength:"=?",placeholder:"=?",required:"=?",rows:"=?",validation:"=?",validationMessage:"=?",viewport:"=?"},restrict:"A",transclude:!0,templateUrl:"src/apInputContainer.html",link:function(e){function f(){if(!a.isObject(o))throw new Error("apInputGroup requires a valid field definition object",e);var b={choices:o.Choices||o.choices,columns:d.defaultNumberOfColumns,contentUrl:"",description:o.Description||o.description,displayDescription:!1,disabled:!1,inputClass:"",inputGroup:!0,inputGroupClass:"col-sm-3",label:o.DisplayName||o.displayName,lookupField:o.ShowField?c("inflector")(o.ShowField,"variable"):"title",max:o.Max,maxlength:void 0,min:o.Min,minlength:void 0,placeholder:null,required:o.Required||!1,rows:o.NumLines||d.defaultNumberOfRows,validationMessage:"",viewport:d.defaultViewportSize};switch(o.objectType){case"Boolean":b.contentUrl="src/apInputControl.Boolean.html";break;case"Choice":b.contentUrl="src/apInputControl.Choice.html";break;case"DateTime":b.contentUrl="src/apInputControl.Date.html",b.validation=b.validation||n,b.validationMessage="Please enter a valid date.";break;case"HTML":b.contentUrl="src/apInputControl.HTML.html",b.columns=d.defaultTextAreaColumns;break;case"Currency":b.contentUrl="src/apInputControl.Currency.html",b.validationMessage="Only numbers and decimal place accepted.";break;case"Float":case"Integer":case"Number":b.contentUrl="src/apInputControl.Number.html",b.validationMessage="Not a valid number!";break;case"Lookup":q.push(function(){i(p.entity)}),b.contentUrl="src/apInputControl.Lookup.html";break;case"LookupMulti":q.push(function(){i(p.entity)}),b.contentUrl="src/apInputControl.LookupMulti.html";break;case"MultiChoice":b.contentUrl="src/apInputControl.MultiChoice.html";break;case"Note":b.columns=d.defaultTextAreaColumns,b.contentUrl="src/apInputControl.Note.html";break;case"User":q.push(function(){j()}),b.contentUrl="src/apInputControl.Lookup.html";break;case"UserMulti":q.push(function(){j()}),b.contentUrl="src/apInputControl.LookupMulti.html";break;case"Text":b.maxlength=255;default:b.contentUrl="src/apInputControl.Text.html"}if(p=a.extend({},b,o,e),e.$watch("fieldDefinition",function(b,c){b&&b!==c&&a.extend(p,b)},!0),!a.isString(p.fieldName))throw new Error("Field name is either undefined or not a string.  Ensure you place apostrophe's inside the quotes when identifying data-field-name.");e.options=p,e.validate=m,e.getPrimaryTemplate=k,a.isFunction(p.groupClass)&&e.$watch("entity",function(){g()},!0),!p.entity[p.fieldName]&&p.Default&&(p.entity[p.fieldName]=p.Default),a.each(q,function(a){a()})}function g(){var b=p.groupClass||h();p.inputGroupClass=a.isFunction(b)?b(p.entity[p.fieldName],p.entity,p.fieldName):b}function h(){var a=p.cols||d.defaultNumberOfColumns;return"col-"+p.viewport+"-"+a}function i(c){if(!p.lookupOptions&&!e.lookupOptions){var d=p.List;d&&(p.lookupOptions=b.getCachedEntities(d),a.isFunction(p.lookupFilter)&&(p.lookupOptions=p.lookupFilter(c,lookupOptions)))}j()}function j(){var b=p.lookupOptions?p.lookupOptions:e.lookupOptions;p.lookupArray=a.map(b,function(a){return{lookupValue:a[p.lookupField],lookupId:a.id}})}function k(){return p.inputGroup?"src/apInputGroup.html":p.contentUrl}function l(a,b){if(!a||!b)throw new Error("An entity and fieldName are both required on the directive ifa fieldDefinition isn't specified.");return a.getFieldDefinition(b)}function m(b){if(p.validation&&a.isFunction(p.validation)){var c=b||"";return p.validation(c,p)}return!0}function n(b){return b?a.isDate(b):!0}var o,p={},q=[g],r={initialized:!1};e.fieldDefinition?(o=e.fieldDefinition,f(),r.initialized=!0):e.$watch("entity",function(a){(a&&!r.initialized||!angular.equals(a))&&(o=l(e.entity,e.fieldName),f(),r.initialized=!0)})}}}]),angular.module("angularPoint").directive("apInputRow",["_",function(a){return{scope:{entity:"=",fields:"=",containerClass:"=",ngDisabled:"="},restrict:"A",transclude:!0,templateUrl:"src/apInputRow.html",link:function(b){b.fieldNameArray=a.isArray(b.fields)?b.fields:[b.fields],b.state={containerClass:b.containerClass||"row"}}}}]),angular.module("angularPoint").run(["$templateCache",function(a){"use strict";a.put("src/apInputContainer.html","<div ng-include=getPrimaryTemplate()></div>"),a.put("src/apInputControl.Boolean.html",'<button class="btn btn-link {{ options.inputClass }}" ng-click="options.entity[options.fieldName] = !options.entity[options.fieldName]" ng-disabled=options.disabled><i class="fa fa-2x {{ options.entity[options.fieldName] ? \'fa-check-square-o\' : \'fa-square-o\' }}"></i></button> <input type=checkbox class=hidden ng-model=options.entity[options.fieldName] ui-validate="\'validate($value)\'">'),a.put("src/apInputControl.Choice.html",'<div ui-select ng-required=options.required ui-validate="\'validate($value)\'" ng-disabled=options.disabled ng-model=options.entity[options.fieldName] class="{{ options.inputClass }}"><div ui-select-match placeholder="{{ options.placeholder }}">{{ $select.selected }}</div><div ui-select-choices data-repeat="choice in options.choices | filter:$select.search">{{ choice }}</div></div>'),a.put("src/apInputControl.Currency.html",'<div class=input-group><span class=input-group-addon><i class="fa fa-dollar"></i></span> <input type=number class="form-control {{ options.inputClass }}" ui-validate="\'validate($value)\'" ng-model=options.entity[options.fieldName] ng-required=options.required ng-disabled=options.disabled ng-minlength="{{ options.minlength }}" ng-maxlength="{{ options.maxlength }}" min={{options.min}} max={{options.max}} placeholder={{options.placeholder}}></div>'),a.put("src/apInputControl.Date.html",'<input ui-date class="form-control {{ options.inputClass }}" ui-validate="\'validate($value)\'" ng-required=options.required ng-disabled=options.disabled placeholder="{{ options.placeholder }}" ng-model=options.entity[options.fieldName]>'),a.put("src/apInputControl.HTML.html",'<div text-angular class="{{ options.inputClass }}" ng-required=options.required ui-validate="\'validate($value)\'" name="{{ options.fieldName }}" ta-disabled=options.disabled placeholder={{options.placeholder}} ng-model=options.entity[options.fieldName]></div>'),a.put("src/apInputControl.Lookup.html",'<div ui-select ng-model=options.entity[options.fieldName] ng-required=options.required ng-disabled=options.disabled class="{{ options.inputClass }}"><div ui-select-match placeholder="{{ options.placeholder }}">{{ $select.selected.lookupValue}}</div><div ui-select-choices data-repeat="lookup in options.lookupArray | filter:{lookupValue: $select.search} track by lookup.lookupId">{{ lookup.lookupValue }}</div></div>'),a.put("src/apInputControl.LookupMulti.html",'<div ui-select multiple ng-model=options.entity[options.fieldName] ui-validate="\'validate($value)\'" ng-required=options.required ng-disabled=options.disabled class="{{ options.inputClass }}"><div ui-select-match placeholder="{{ options.placeholder }}">{{ $item.lookupValue }}</div><div ui-select-choices data-repeat="lookup in options.lookupArray | filter:{lookupValue: $select.search} track by lookup.lookupId">{{ lookup.lookupValue }}</div></div>'),a.put("src/apInputControl.MultiChoice.html",'<div ui-select multiple ng-required=options.required ui-validate="\'validate($value)\'" ng-disabled=options.disabled ng-model=options.entity[options.fieldName] class="{{ options.inputClass }}"><div ui-select-match placeholder="{{ options.placeholder }}">{{ $item }}</div><div ui-select-choices data-repeat="choice in options.choices | filter:$select.search">{{ choice }}</div></div>'),a.put("src/apInputControl.Note.html",'<textarea msd-elastic ng-model=options.entity[options.fieldName] ui-validate="\'validate($value)\'" class="form-control {{ options.inputClass }}" rows={{options.rows}} ng-required=options.required ng-disabled=options.disabled placeholder={{options.placeholder}}>\n</textarea>'),a.put("src/apInputControl.Number.html",'<input type=number class="form-control {{ options.inputClass }}" ui-validate="\'validate($value)\'" ng-model=options.entity[options.fieldName] ng-required=options.required ng-disabled=options.disabled min={{options.min}} max={{options.max}} ng-minlength="{{ options.minlength }}" ng-maxlength="{{ options.maxlength }}" placeholder={{options.placeholder}}>'),a.put("src/apInputControl.Text.html",'<input class="form-control {{ options.inputClass }}" ui-validate="\'validate($value)\'" ng-model=options.entity[options.fieldName] ng-required=options.required ng-disabled=options.disabled ng-minlength="{{ options.minlength }}" ng-maxlength="{{ options.maxlength }}" placeholder={{options.placeholder}}>'),a.put("src/apInputGroup.html","<div class={{options.inputGroupClass}} ng-form=apInput><div class=form-group title={{options.description}} ng-class=\"{'has-error': apInput.$invalid}\"><label class=control-label>{{ options.label }} {{options.required ? '*' : ''}}</label><div ng-include=options.contentUrl></div><span class=help-text ng-if=options.displayDescription>{{ options.description }}</span> <span class=text-danger ng-if=apInput.$invalid>{{ options.validationMessage }}</span></div></div>"),a.put("src/apInputRow.html",'<div class="{{ options.containerClass }}"><div ng-repeat="fieldName in fieldNameArray" ap-input-group data-entity=entity data-field-name=fieldName></div></div>')}]);